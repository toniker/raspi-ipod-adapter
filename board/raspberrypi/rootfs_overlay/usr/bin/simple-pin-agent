#!/bin/sh
# Simple PIN agent for A2DP pairing - PIN: 5999

echo "PIN Agent: Starting, will respond with PIN 5999"

# Function to handle pairing via bluetoothctl
handle_pairing() {
    echo "PIN Agent: Monitoring for pairing requests..."
    
    while true; do
        # Keep agent active
        {
            echo "agent KeyboardDisplay"
            echo "default-agent" 
        } | bluetoothctl > /dev/null 2>&1
        
        sleep 30
    done
}

# Start monitoring
handle_pairing &
